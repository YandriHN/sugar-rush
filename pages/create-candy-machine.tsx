import type { NextPage } from 'next'
import Head from 'next/head'
import Form from 'components/CreateCM/Form'
import { CheckConnectedWallet, Title } from 'components/Layout'
import { useState } from 'react'
import { useWallet } from '@solana/wallet-adapter-react'
import styles from 'styles/Accordion.module.css'

const upArrow = '‚Üë'
const downArrow = '‚Üì'

const CreateCandyMachine: NextPage = () => {
  const [isHidden, setIsHidden] = useState(false)
  const { connected } = useWallet()
  const numbers = [...Array(3).keys()]

  if (!connected) {
    return (
      <>
        <Head>
          <title>Create Candy Machine</title>
          <meta name='description' content='Generated by create next app' />
          <link rel='icon' href='/favicon.ico' />
        </Head>
        <CheckConnectedWallet />
      </>
    )
  }

  return (
    <>
      <Head>
        <title>Create Candy Machine</title>
        <meta name='description' content='Generated by create next app' />
        <link rel='icon' href='/favicon.ico' />
      </Head>
      <div className='flex justify-center items-center flex-col'>
        <Title text='Create Candy Machine' />
      </div>
      <Form />
      <div className='flex flex-col justify-center items-center'>
        <div
          className={`w-[38rem] rounded-xl border-4 border-cyan-600 p-3 border-l-[2rem] ${
            styles.accordion
          } overflow-y-hidden ${!isHidden ? styles.show : ''}`}
        >
          <span
            className='flex flex-col justify-center items-center cursor-pointer text-cyan-800 font-extrabold h-auto relative'
            onClick={() => setIsHidden(!isHidden)}
          >
            {isHidden ? `Show ${downArrow}` : `Hide ${upArrow}`}
          </span>
          {!isHidden && (
            <>
              <div>
                Are you confused? No worries, you will not be lost any longer!
                ü§òÔ∏è The files you have to upload to the Candy Machine are your
                NFT images/gifs with their respective metadata scoped in a JSON
                file. If you have a collection of {numbers.length} NFTs, you
                must name them like this:
                <ol className='my-4'>
                  {numbers.map((number) => (
                    <li key={number}>
                      <span className='font-bold'>
                        {number}.png - {number}.json
                      </span>
                    </li>
                  ))}
                </ol>
                The first one must start with 0.png and 0.json and moving
                upwards by 1. <br />
                You can{' '}
                <a
                  href='/assets.zip'
                  download
                  className='text-blue-500 hover:underline'
                >
                  download
                </a>{' '}
                the following assets containing 3 NFTs (6 files) to see the
                structure of the JSON metadata. More info can be found{' '}
                <a
                  className='font-bold text-blue-500 hover:underline'
                  href='https://docs.metaplex.com/candy-machine-v2/preparing-assets'
                >
                  here
                </a>
              </div>
            </>
          )}
        </div>
      </div>
    </>
  )
}

export default CreateCandyMachine
